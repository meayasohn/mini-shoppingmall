<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <link rel="stylesheet" href="newhome.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <title>Document</title>
</head>
<body>
  <!-- 검색어 입력 -->
  <!-- <nav class="navbar navbar-light bg-light ">
    <form class="w-100%">
      <input class="form-control" type="search" placeholder="Search" aria-label="Search">
    </form>
  </nav> -->
  <div id="search-item" class="m-3">
    <form >
      <input class="form-control" type="search" placeholder="Search" aria-label="Search">
    </form>
  </div>

  <!-- 쇼핑파트 -->
  <div class="container p-0">
    <div class="row"><!--목록제목-->
      <div class="col">
        <h3>모든 상품 리스트</h3>
      </div>
      <div class="col-4">
        <h3>장바구니</h3>
      </div>
    </div>
    <div class="row "> <!--목록상세-->
      <!-- 상품리스트 [동적할당]--> 
      <div class="col-8 container-fluid">
        <div id="list" class="row">

        </div>
      </div>
      <!-- <div class="col m-0 p-0 border">
        <div class="card h-100">
          <img src="..." class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">제목1</h5>
            <p class="card-text">content</p>
          </div>
          <div class="card-footer">
            <small class="text-muted">Last updated 3 mins ago</small>
          </div>
        </div>
      </div>
      <div class="col m-0 p-0 border">
        <div class="card h-100">
          <img src="..." class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">제목2</h5>
            <p class="card-text">content</p>
          </div>
          <div class="card-footer">
            <small class="text-muted">Last updated 3 mins ago</small>
          </div>
        </div>
      </div>
      <div class="col m-0 p-0 border">
        <div class="card h-100">
          <img src="..." class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">제목3</h5>
            <p class="card-text">content</p>
          </div>
          <div class="card-footer">
            <small class="text-muted">Last updated 3 mins ago</small>
          </div>
        </div>
      </div>  -->
      <!-- 장바구니 -->
      <div class="col-4 cart border">
        <div class="cart-box mt-2 mb-2 p-2">이곳에 상품을 놓아주세요</div>
        <div class="float-right total ">총 합계 0원</div>
        <div class="btn btn-primary mt-2 mb-2 w-100 ">구매하기</div>
      </div>
    </div>
  </div>

  <button id="list-add" class="btn btn-primary">데이터추가</button>
  <button id="list-clear" class="btn btn-primary">데이터삭제</button>

  <script>

  var shoppingList =[];
  
    // 데이터를 json에서 load 한다.
  function loadData(){
    $.getJSON("store.json", function(data){
            // console.log(data);
            for(let i=0; i<data.products.length; i++){
              shoppingList[i] = {...data.products[i]};
              console.log(shoppingList[i]);
            }
          loadList(shoppingList);
        }).fail(function(){
            console.log("An error has occurred.");
        });
  }

  // 리스트를 clear 한다.
  function clearItem(){
    $('#list').empty();
  }

  function loadList(list){
    for(let i=0; i<list.length; i++){
      addItem(list[i]);
    }
  }

  // 리스트에 item 추가
  function addItem(data){
    // console.log('addItem',data);

    var addItemBody =`
      <div class="col m-1 p-0">
        <div class="card h-100">
          <img src="../image/${data.photo}" class="card-img-top" alt="...">
          <div class="card-body">
            <p class="card-title">${data.product_name}</p>
            <p class="card-text">${data.brand_name}</p>
          </div>
          <div class="card-footer">
            <small class="text-muted">${data.price}</small>
          </div>
        </div>
      </div>
    `;
    $('#list').append(addItemBody);
  }

    $( document ).ready(function() {
      //데이터 목록을 가져온다.
      loadData();

      // // 목록을 추가해 놓는다.
      // for(let i=0; i<4; i++){
      //   addItem(i);
      // }
    console.log("아이템 add 완료");
    });

    $('#list-add').click(function(){
      loadList(shoppingList);
    });

    $('#list-clear').click(function(){
      clearItem();
    });
    
  </script>
</body>
</html>